{"version":3,"sources":["sq-time.js","webcam.js","App.js","serviceWorker.js","index.js"],"names":["lZ","n","toString","TSecond","props","console","log","el","React","useRef","callback","cB","fireSS","v","current","type","payload","fireMM","fireHR","fireDT","d","y","getFullYear","m","getMonth","getDate","w","getDay","useEffect","d0","Date","getSeconds","getMinutes","getHours","id","setInterval","ss","mm","hr","clearInterval","useTimer","_ref","setAttribute","onSecond","onMinute","onHour","onDate","Error","react_default","a","createElement","ref","TMinute","others","Object","objectWithoutProperties","Fragment","sq_time_TSecond","assign","THour","sq_time_TMinute","TDate","sq_time_THour","Webcam","_ref$bUser","bUser","rVE","rTitle","constraints","video","facingMode","videoStream","navigator","mediaDevices","getUserMedia","then","stream","videoTracks","getVideoTracks","label","onremovetrack","srcObject","catch","error","name","getTracks","forEach","tr","stop","alert","aSize","width","height","aFilter","aTrans","aShape","sz","ft","sh","className","autoPlay","webcam_TBtn","onClick","i","length","style","handleSize","filter","transform","borderRadius","TBtn","children","WorldClock","_useState","useState","_useState2","slicedToArray","showLv","setShowLv","TZ","em","lv","cs","ct","tz","z","sq_time_TDate","toLocaleString","timeZone","updateMinute","map","key","data-ct","data-cs","App","_useState3","_useState4","webcam","setWebcam","_useState5","_useState6","face","setFace","App_WorldClock","disabled","webcam_Webcam","Boolean","window","location","hostname","match","ReactDOM","render","src_App","document","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.d9ab428d.chunk.js","sourcesContent":["import React, { useRef, useEffect } from 'react';\n\n/*\n * To avoid unnecessarily repeated rendering per second, fire events per each second, minute, hour, and date\n * at the start and then only when the value changes.\n *\n * Cascaded Rendering according to the update cycle\n * callbacks per each timer message should pass down to <TSecond /> that has dispatch function and timer.\n * <TDate />\n *   <THour       dt={} />\n *     <TMinute   dt={} hr={} />\n *       <TSecond dt={} hr={} mm={} />   contains Timer (custom Hook that encapsulates setInterval())\n*/\n\nexport const lZ = n => (n < 10) ? '0' + n : n.toString();\n\nconst useTimer = callback => {\n  const cB = useRef();\n  const fireSS = v => cB.current({type: 'TM_SS', payload: v});\n  const fireMM = v => cB.current({type: 'TM_MM', payload: v});\n  const fireHR = v => cB.current({type: 'TM_HR', payload: v});\n  const fireDT = d => cB.current({type: 'TM_DT', payload:\n    {\n      y: d.getFullYear(),\n      m: d.getMonth()+1,\n      d: d.getDate(),\n      w: d.getDay() // Sun - Sat: 0 - 6\n    }\n  });\n\n  useEffect(() => {\n    cB.current = callback;\n    const d0 = new Date();  // Initial setter before setInterval's firing\n    fireSS(d0.getSeconds());\n    fireMM(d0.getMinutes());\n    fireHR(d0.getHours());\n    fireDT(d0);\n    console.log(\"useTimer::useEffect: callback set\");\n  }, [callback]);\n\n  useEffect(() => {\n    const id = setInterval(() => {\n      const d = new Date();\n      const ss = d.getSeconds();\n      fireSS(ss);\n      if (ss === 0) {\n        const mm = d.getMinutes();\n        fireMM(mm);\n        if (mm === 0) {\n          const hr = d.getHours();\n          fireHR(hr);\n          if (hr === 0) {\n            fireDT(d);\n          }\n        }\n      }\n    }, 1000);\n    console.log(\"useTimer::useEffect: setInterval\", id);\n    return () => clearInterval(id);\n  }, []);\n}\n\nexport const TSecond = props => {\n  console.log(\"Second()::render\");\n  const el = React.useRef(null);  // imperatively accessing DOM\n  const callback = v => {\n    el.current.setAttribute(\"data-ss\", lZ(v));  // textContent +1 DOM Node problem\n    props.onSecond && props.onSecond(v);\n  }\n  const dispatch = ({type, payload}) => {\n    switch (type) {\n      case 'TM_SS': callback(payload); break;\n      case 'TM_MM': props.onMinute && props.onMinute(payload); break;\n      case 'TM_HR': props.onHour   && props.onHour(payload);   break;\n      case 'TM_DT': props.onDate   && props.onDate(payload);   break;\n      default: throw new Error('action not defined!');\n    }\n  }\n  useTimer(dispatch);\n  return <span ref={el} id=\"tm-ss\" />;\n}\n\nexport const TMinute = props => {\n  console.log(\"Minute()::render\");\n  const { onMinute, ...others } = props; // no to be overwritten\n  const el = React.useRef(null);\n  const callback = v => {\n    el.current.setAttribute(\"data-mm\", lZ(v));\n    onMinute && onMinute(v);\n  }\n  return <><span ref={el} id=\"tm-mm\" /><span id=\"tm-co\" /><TSecond onMinute={callback} {...others} /></>;\n}\n\nexport const THour = props => {\n  console.log(\"Hour()::render\");\n  const { onHour, ...others } = props;\n  const el = React.useRef(null);\n  const callback = v => {\n    el.current.setAttribute(\"data-hr\", lZ(v));\n    onHour && onHour(v);\n  }\n  return <span id=\"tm\"><span ref={el} id=\"tm-hr\" /><span id=\"tm-co\" />\n    <TMinute onHour={callback} {...others} /></span>;\n}\n\nexport const TDate = props => {\n  console.log(\"Date()::render\");\n  const { onDate, ...others } = props;\n  const el = React.useRef(null);\n  const callback = v => {\n    el.current.setAttribute(\"data-dw\", v.w);\n    el.current.setAttribute(\"data-mo\", lZ(v.m));\n    el.current.setAttribute(\"data-dd\", lZ(v.d));\n    el.current.setAttribute(\"data-yr\", lZ(v.y));\n    onDate && onDate(v);\n  }\n  return <div><span ref={el} id=\"tm-dt\" /> <THour onDate={callback} {...others} /></div>;\n}\n\n/*\n      <TDate dt={ (d) => console.log(\"Daily job\", d) } mm={console.log} />\n*/\n\n// get date and time of the specified offset city\nexport const getDateOffset = offset => {\n  const d = new Date();\n  const utc = d.getTime() + (d.getTimezoneOffset() * 60000);  // UTC time in msec\n  return new Date(utc + (3600000 * offset));\n}\n","import React, { useRef, useEffect } from 'react';\n\nexport const Webcam = ({bUser=true}) => {\n  console.log(\"Webcam::render\");\n  const rVE    = useRef(null);  // ref to Video Element\n  const rTitle = useRef(null);\n  // 'mediaDevices' not supported in mobile Android and Amazon Fire tablet\n  const constraints = { video: { facingMode: bUser ? 'user' : 'environment' }};\n\n  useEffect(() => {\n    const mediaAvailable = () => 'mediaDevices' in navigator && 'getUserMedia' in navigator.mediaDevices;\n\n    if (mediaAvailable()) {\n      let videoStream;\n      navigator.mediaDevices.getUserMedia(constraints)\n        .then(function(stream) {\n          const videoTracks = stream.getVideoTracks();\n          rTitle.current.setAttribute('data-src', 'Source:' + videoTracks[0].label);\n          console.log('Using video device: ' + videoTracks[0].label); // FaceTime HD Camera (Built-in)\n          stream.onremovetrack = function() {\n            console.log('Stream ended');\n          }\n          //window.stream = stream;\n          rVE.current.srcObject = stream;\n          videoStream = stream;\n        })\n        .catch(function(error) {\n          console.log(error.name);\n          if (typeof error !== 'undefined')\n            console.error(error);\n        });\n      return () => {  // unsure this part is needed ... \n        if (videoStream) {\n          const tracks = videoStream.getTracks();\n          tracks.forEach(tr => tr.stop());\n          videoStream = null;\n        }\n      }\n    } else {\n      alert(\"mediaDevices not supported!\");\n    }\n  }, [constraints])\n\n  const aSize = [\n    {width: '70%',   height: '70%'},\n    {width: '50%',   height: '50%'},\n    {width: '300px', height: '200px'},\n    {width: '100%',  height: '100%'},\n  ];\n\n  const aFilter = [\n    \"sepia(100%)\",\n    \"grayscale(100%)\",\n    \"blur(4px)\",\n    \"brightness(3.5)\",\n    \"opacity(.4)\",\n    \"invert(75%)\",\n    \"drop-shadow(16px 16px 20px blue)\",\n    \"hue-rotate(90deg)\",\n  ];\n\n  const aTrans = [\n    \"rotateY(180deg)\",\n    \"rotateY(0deg)\",\n    \"rotateZ(90deg)\",\n    \"rotateZ(180deg)\",\n    \"rotateZ(-45deg)\",\n    \"rotateX(20deg) rotateY(-45deg)\",\n  ];\n\n  const aShape = [\n    \"50%\",\n    \"25%\",\n    \"5%\",\n    \"0\",\n  ];\n\n  const sz = useRef(0);  // size index\n  const ft = useRef(0);  // filter index\n  const tr = useRef(0);  // transform index\n  const sh = useRef(0);  // shape index\n\n  const handleSize = () => {\n    const i = sz.current++ % aSize.length\n    rVE.current.style.width  = aSize[i].width;\n    rVE.current.style.height = aSize[i].height;\n  }\n  const handleFilter = () => { rVE.current.style.filter       = aFilter[ft.current++ % aFilter.length]; }\n  const handleTrans  = () => { rVE.current.style.transform    = aTrans[ tr.current++ % aTrans.length]; }\n  const handleShape  = () => { rVE.current.style.borderRadius = aShape[ sh.current++ % aShape.length]; }\n  const handleReset  = () => { rVE.current.setAttribute(\"style\", \"\"); }\n\n  // controls\n  return (\n    <div ref={rTitle} className=\"vid-cont\">\n      <video ref={rVE} autoPlay={true} className=\"vid-fw\" />\n      <TBtn onClick={ () => handleSize() }>Toggle Sizes</TBtn>\n      <TBtn onClick={ () => handleFilter() }>Toggle Filters</TBtn>\n      <TBtn onClick={ () => handleTrans() }>Toggle Transforms</TBtn>\n      <TBtn onClick={ () => handleShape() }>Toggle Shapes</TBtn>\n      <TBtn onClick={ () => handleReset() }>Reset All</TBtn>\n    </div>\n  );\n}\n\nexport const TBtn = props => <button type=\"button\" className=\"test-btn\" {...props}>{props.children}</button>;\n","import React, { useRef, useState } from 'react';\nimport { lZ, TDate } from './sq-time';\nimport { TBtn, Webcam } from './webcam';\nimport './App.scss';\n\nconst WorldClock = () => {\n  const [showLv, setShowLv] = useState(3);\n\n  const TZ = [\n    //'',\n    {el: useRef(null), em: useRef(null), lv: 3, cs: '🌴', ct: 'Honolulu',      tz: 'Pacific/Honolulu'},\n    {el: useRef(null), em: useRef(null), lv: 1, cs: '💖', ct: 'San Francisco', tz: 'America/Los_Angeles'},\n    {el: useRef(null), em: useRef(null), lv: 3, cs: '🏜', ct: 'Denver',        tz: 'America/Denver'},\n    {el: useRef(null), em: useRef(null), lv: 3, cs: '🌆', ct: 'Chicago',       tz: 'America/Chicago'},\n    {el: useRef(null), em: useRef(null), lv: 2, cs: '🗽', ct: 'New York',      tz: 'America/New_York'},\n    {el: useRef(null), em: useRef(null), lv: 3, cs: '💃🏾', ct: 'Buenos Aires',  tz: 'America/Argentina/Buenos_Aires'},\n    {el: useRef(null), em: useRef(null), lv: 3, cs: '💂', ct: 'London',        tz: 'Europe/London'},\n    {el: useRef(null), em: useRef(null), lv: 2, cs: '🇫🇷', ct: 'Paris',         tz: 'Europe/Paris'},\n    {el: useRef(null), em: useRef(null), lv: 3, cs: '🥃', ct: 'Moscow',        tz: 'Europe/Moscow'},\n    {el: useRef(null), em: useRef(null), lv: 3, cs: '🇨🇳', ct: 'Shanghai',      tz: 'Asia/Shanghai'},\n    {el: useRef(null), em: useRef(null), lv: 1, cs: '🗼', ct: 'Tokyo',      tz: 'Asia/Tokyo'},\n    {el: useRef(null), em: useRef(null), lv: 3, cs: '🇦🇺', ct: 'Melbourne',     tz: 'Australia/Melbourne'},\n  ].filter(z => z.lv <= showLv);\n\n  const updateHour = () => {  // onHour change\n    TZ.forEach( z => {\n      const d = new Date(new Date().toLocaleString('en-US', {timeZone: z.tz}));\n      z.el.current.setAttribute(\"data-dw\", d.getDay());\n      z.el.current.setAttribute(\"data-mo\", lZ(d.getMonth()+1));\n      z.el.current.setAttribute(\"data-dd\", lZ(d.getDate()));\n      z.el.current.setAttribute(\"data-yr\", lZ(d.getFullYear()));\n      z.el.current.setAttribute(\"data-hr\", lZ(d.getHours()));\n    });\n  }\n  /*\n      '<span id=\"tm-sd\" data-dw=' + d.getDay()          +\n                      ' data-mo=' + lZ(d.getMonth()+1)  +\n                      ' data-dd=' + lZ(d.getDate())     +\n                      ' data-yr=' + lZ(d.getFullYear()) + '></span> ' +\n      '<span id=\"tm-hr\" data-dw=' + d.getDay()          +\n                      ' data-hr=' + lZ(d.getHours())    + '></span>';\n   * */\n\n  const updateMinute = (m) => {  // onMinute change\n    //const nowTZ = d => lZ(d.getMinutes());  // Most of countries will be ok with the same minute\n    TZ.forEach( z => z.em.current.setAttribute(\"data-mm\", lZ(m)) );\n  }\n\n  return (\n    <>\n      <h1>World Clock</h1>\n      <TBtn\n        onClick={ ()=>setShowLv((showLv + 1) % 4) }>\n        Toggle Cities ({showLv})\n      </TBtn>\n      <TDate\n        onDate={ d => console.log(\"Daily job\", d) }\n        onHour={updateHour}\n        onMinute={m => updateMinute(m)}\n      />\n      {TZ.filter(z => z.lv <= showLv).map((z, i) =>\n        <li key={i}>\n          <span id=\"tm-ct\" data-ct={z.ct} data-cs={z.cs} /> <span ref={z.el} id=\"tm-sd\" />\n          <span id=\"tm-co\" /><span ref={z.em} id=\"tm-dm\" />\n        </li>)}\n    </>\n  );\n}\n\nfunction App() {\n  console.log(\"App()::render\");\n  const [webcam, setWebcam] = useState(true);\n  const [face,   setFace]   = useState(true);\n\n  return (\n    <div className=\"App\">\n      <WorldClock />\n      <TBtn\n        onClick={ ()=>setWebcam(!webcam) }>\n        Webcam {webcam ? 'Off' : 'On'}\n      </TBtn>\n      <TBtn\n        disabled={!webcam}\n        onClick={ ()=>setFace(!face) }>\n        Face {face ? 'Environment' : 'User'}\n      </TBtn>\n      {webcam && <Webcam bUser={face} />}\n    </div>\n  );\n}\n\n//  <span role=\"img\" aria-label=\"city\">{z.cs}</span>\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}